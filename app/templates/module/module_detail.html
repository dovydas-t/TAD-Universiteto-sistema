{% extends "base.html" %}

{% block title %}Module Details{% endblock %}

{% block content %}
<div class="module-container">
    <div class="module-information-container">
        <h2>Module Details</h2>
        <p><strong>Module ID:</strong> {{ module.id }}</p>
        <p><strong>Name:</strong> {{ module.name }}</p>
        <p><strong>Description:</strong> {{ module.description }}</p>
        <p><strong>Credits:</strong> {{ module.credits }}</p>
        <p><strong>Semester:</strong> {{ module.semester.value }}</p>
        <p><strong>Study Program:</strong> {{ module.study_program.name }}</p>
    </div>

    {% if module.image_path %}
        <div>
            <img
                src="{{ url_for('static/images', filename=module.image_path) }}"
                alt="Module image"
                style="max-width: 300px;">
        </div>
    {% endif %}
    
    <h3>Required Modules:</h3>
    {% if module.requirements %}
    <ul>
        {% for req in module.requirements %}
        <li>{{ req.required_module.name }}</li>
        {% endfor %}
    </ul>
    {% else %}
        <p>This module has no requirements!</p>
    {% endif %}

    <h3>This module is Required For Modules:</h3>
    {% if module.required_for %}
    <ul>
        {% for req in module.required_for %}
        <li>{{ req.module.name }}</li>
        {% endfor %}
    </ul>
    {% else %}
        <p>This module is not required for other modules!</p>
    {% endif %}

    <h3>This module assignments:</h3>
    {% if module.assignments %}
    <ul>
        {% for assignment in module.assignments %}
        <li>{{ assignment.title }} - {{ assignment.description }}</li>
        {% endfor %}
    </ul>
    {% else %}
        <p>This module has no assignments!</p>
    {% endif %}

    <h3>Module Tests:</h3>
    {% if module.tests %}
    <ul>
        {% for test in module.tests %}
        <li>{{ test.name }} - {{ test.date }}</li>
        {% endfor %}
    </ul>
    {% else %}
        <p>This module has no tests.</p>
    {% endif %}

    <h3>Attendance Records:</h3>
    {% if module.attendances %}
    <ul>
        {% for attendance in module.attendances %}
        <li>{{ attendance.student.name }} - {{ attendance.date }} - {{ attendance.status }}</li>
        {% endfor %}
    </ul>
    {% else %}
        <p>Nobody attended this module yet!</p>
    {% endif %}

    {% if module.grades %}
    <h3>Grades</h3>
    <ul>
        {% for grade in module.grades %}
        <li>{{ grade.student.name }} - {{ grade.value }}</li>
        {% endfor %}
    </ul>
    {% endif %}

    {% if module.schedule_items %}
    <h3>Schedule</h3>
    <ul>
        {% for item in module.schedule_items %}
        <li>{{ item.day }} {{ item.start_time }} - {{ item.end_time }} in {{ item.room }}</li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
{% endblock %}
